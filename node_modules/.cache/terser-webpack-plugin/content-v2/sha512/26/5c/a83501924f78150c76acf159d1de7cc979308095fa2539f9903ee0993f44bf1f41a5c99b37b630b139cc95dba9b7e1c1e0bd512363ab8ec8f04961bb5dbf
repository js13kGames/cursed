{"code":"!function(t){var s={};function e(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&s&&\"string\"!=typeof t)for(var h in t)e.d(i,h,function(s){return t[s]}.bind(null,h));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,\"a\",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p=\"\",e(e.s=7)}([function(t,s,e){t.exports=e.p+\"3a0878f3c90f3669fd9547447918a18e.png\"},function(t,s,e){t.exports=e.p+\"716436ab0e20e856d128ec96d952b7e6.png\"},function(t,s,e){t.exports=e.p+\"c0035619fcaeaa7578b6f7cc2b69ae94.png\"},function(t,s,e){t.exports=e.p+\"1928d6b60b677fb1eeb75ff8339f1c41.png\"},function(t,s,e){t.exports=e.p+\"3015c47eeeebffc8cf41182db9eae0ad.png\"},function(t,s,e){t.exports=e.p+\"396ddd4db8873c9ad631d7a8fc540b3d.png\"},function(t,s,e){},function(t,s,e){\"use strict\";e.r(s);let i=window;i.DEBUG=!0,i.entities=[],i.tick=0,i.sq=t=>Math.pow(t,2),i.sqDist=(t,s)=>i.sq(t.x-s.x)+i.sq(t.y-s.y),i.hyp=(t,s)=>Math.sqrt(t*t+s*s),i.ran=(t=1)=>Math.random()*t,i.ranNorm=(t=1)=>(Math.random()-.5)*t,i.ranInt=t=>Math.round(Math.random()*t),i.oneIn=t=>Math.round(Math.random()*t)===t;var h=i;function a(t,s){return Math.atan2(s.y-t.y,s.x-t.x)}h.keyMap=0,h.keys={87:1,65:2,83:4,68:8,32:16},document.onkeydown=function(t){var s=t.keyCode||t.key;keys[s]&&(keyMap|=keys[s],t.preventDefault())},document.onkeyup=function(t){var s=t.keyCode||t.key;keyMap&keys[s]&&(keyMap^=keys[s],t.preventDefault())};var n=e(0),o=e.n(n),r=e(1),_=e.n(r),c=e(2),l=e.n(c),d=e(3),p=e.n(d),u=e(4),y=e.n(u),x=e(5),g=e.n(x),v=(_.a,o.a,l.a,p.a,y.a,g.a,1),f=2,b=3,w=class{constructor(t={}){this._parent=t.parent||\"game\",this._type=t.type||\"entity\",this._speed=t.speed||1,this._health=t.health||1,this._damage=t.damage||1,this._pos=t.pos?{...t.pos}:{x:h.bounds.width/2,y:h.bounds.height/2,angle:0},this._vel=t.vel?{...t.vel}:{x:0,y:0},this._constAngle=t.constAngle,this._collides=t.collides||!0,this._hitrad=t.hitrad||5,this.isDead=!1}_die(){this.isDead=!0}_checkCollisions(){let t=h.entities.filter(t=>h.sqDist(this._pos,t._pos)<h.sq(.6*this._hitrad)+h.sq(.6*t._hitrad)&&t._collides);this._handleCollisions(t)}_handleCollisions(t){}_outOfBounds(){return this._pos.x-this._hitrad<2?1:this._pos.x+this._hitrad>h.bounds.width?1:this._pos.y-this._hitrad<2?2:this._pos.y+this._hitrad>h.bounds.height?2:void 0}_drawHitbox(t){t.beginPath(),t.arc(0,0,.6*this._hitrad,0,2*Math.PI),t.stroke(),t.closePath()}takeDamage(t){this._health-=t}update(t){this.health<=0&&this._die(),this.collides&&this._checkCollisions(),this._pos.x+=this._vel.x*this._speed,this._pos.y-=this._vel.y*this._speed,this._pos.angle=this._constAngle||a(this._pos,this._target),this._vel.x*=this._vel.x>.1||this._vel.x<.1?.98:0,this._vel.y*=this._vel.y>.1||this._vel.y<.1?.98:0,this._render(t)}_render(t){t.fillRect(this._pos.x,this._pos.y,20,20)}},k=class extends w{constructor(t){super(t),this._size=0,this._maxsize=30,this._collides=!1,this._type=\"explosion\"}update(t){this._size++,this._size===this._maxsize&&(this.isDead=!0),this._render(t)}_render(t){t.save(),t.translate(this._pos.x,this._pos.y),t.beginPath(),t.strokeStyle=`rgba(0, 100, 0, ${.6-this._size/this._maxsize})`,t.arc(0,0,this._size,0,2*Math.PI),t.stroke(),t.restore()}},m=class extends w{constructor(t){super(t),this._speed=4,this._hitrad=8,this._collides=!0,this._type=b,this._damage=1}_die(){h.entities.push(new k({pos:this._pos})),this.isDead=!0}_handleCollisions(t){t.map(t=>{switch(t._type){case this._type:case this._parent:break;default:t.takeDamage(this._damage),this._die()}})}update(t){this._checkCollisions(),this._outOfBounds()&&this._die(),this._pos.x+=this._vel.x*this._speed,this._pos.y-=this._vel.y*this._speed,this._pos.angle=this._constAngle,this._render(t)}_render(t){t.save(),t.translate(this._pos.x,this._pos.y),t.rotate(this._pos.angle),t.fillStyle=\"rgba(2, 100, 2, 0.1)\",t.fillRect(-this._hitrad,-this._hitrad/2,-this._hitrad/2,this._hitrad/2),t.fillStyle=\"rgba(2, 100, 2, 0.1)\",t.fillRect(-this._hitrad/2,-this._hitrad/2,-this._hitrad/2,this._hitrad/2),t.fillStyle=\"rgba(0, 20, 100, 0.8)\",t.fillRect(0,-this._hitrad/2,-this._hitrad/2,this._hitrad/2),t.restore()}},M=class extends w{constructor(t){super(t),this._speed=.5,this._cursorType=\"basic\",this._hitrad=15,this._type=v}_shoot(){if(h.tick%10==0){let t=this._pos.angle+(h.ran()-.5)/10;this._proj=new m({parent:v,pos:this._pos,vel:{x:Math.cos(t),y:-Math.sin(t)},constAngle:t}),h.entities.push(this._proj)}}update(t){switch(this._pos.x+=this._vel.x*this._speed,this._pos.y-=this._vel.y*this._speed,this._pos.angle=this._constAngle||a(this._pos,this._target),h.keyMap&h.keys[87]&&(this._vel.y+=this._speed),h.keyMap&h.keys[65]&&(this._vel.x-=this._speed),h.keyMap&h.keys[83]&&(this._vel.y-=this._speed),h.keyMap&h.keys[68]&&(this._vel.x+=this._speed),h.keyMap&h.keys[32]&&this._shoot(),this._vel.x*=this._vel.x>.1||this._vel.x<.1?.95:0,this._vel.y*=this._vel.y>.1||this._vel.y<.1?.95:0,this._outOfBounds()){case 1:this._vel.x*=-1;break;case 2:this._vel.y*=-1}this._render(t)}_render(t){t.save(),t.translate(this._pos.x,this._pos.y),t.rotate(this._pos.angle+Math.PI/2),t.fillStyle=\"black\",t.beginPath(),t.moveTo(-this._hitrad,0),t.lineTo(0,-this._hitrad),t.lineTo(this._hitrad,0),t.strokeRect(-this._hitrad/2,-this._hitrad/2,this._hitrad,this._hitrad),t.stroke(),h.DEBUG&&this._drawHitbox(t),t.restore()}},D=class extends w{constructor(t={}){switch(super(t),this._speed=.5,this._eType=t._eType||\"floater\",this._type=f,this._hitrad=30,this._eType){case\"floater\":this._health=1;break;case\"sniper\":this._health=2}}_die(){h.entities.push(new k({pos:this._pos})),this.isDead=!0}_shoot(){if(h.tick%10==0){let t=this._pos.angle+(h.ran()-.5)/10;this._proj=new m({parent:f,pos:this._pos,vel:{x:Math.cos(t),y:-Math.sin(t)},constAngle:t}),h.entities.push(this._proj)}}_changeTarget(){this._pos.angle=a(this._pos,{x:Math.round(Math.random()*h.bounds.width),y:Math.round(Math.random()*h.bounds.height)})}update(t){switch(0===this._health&&this._die(),this._eType){case\"floater\":h.oneIn(100)&&this._changeTarget(),this._vel.x+=Math.cos(this._pos.angle)/10,this._vel.y+=-Math.sin(this._pos.angle)/10,this._pos.x+=this._vel.x*this._speed,this._pos.y-=this._vel.y*this._speed}switch(this._vel.x*=this._vel.x>.1||this._vel.x<.1?.95:0,this._vel.y*=this._vel.y>.1||this._vel.y<.1?.95:0,this._outOfBounds()){case 1:this._vel.x*=-1;break;case 2:this._vel.y*=-1}this._render(t)}_render(t){t.save(),t.translate(this._pos.x,this._pos.y),t.strokeWidth=2;let s=this._hitrad;switch(this._eType){case\"floater\":t.rotate(Math.PI/4),t.fillStyle=\"white\",t.fillRect(-s/2,-s/2,s,s),t.strokeRect(-s/2,-s/2,s,s)}h.DEBUG&&this._drawHitbox(t),t.restore()}};window.coot=function(t,s){Math.round(Math.random()*s)==s&&console.log(t)},(new class{constructor(){this._cc=new class{constructor(){this.canvas=document.getElementById(\"_canvas\"),this.cursor={x:0,y:0},this._scale(),this._listen()}_scale(){var t=window.devicePixelRatio||1;this._bounds=this.canvas.getBoundingClientRect(),this.canvas.width=this._bounds.width*t,this.canvas.height=this._bounds.height*t,this.ctx=this.canvas.getContext(\"2d\"),this.ctx.scale(t,t),h.bounds={top:0,left:0,width:this._bounds.width,height:this._bounds.height}}_resize(){this._bounds=this.canvas.getBoundingClientRect(),this.canvas.width=this._bounds.width*dpr,this.canvas.height=this._bounds.height*dpr,h.bounds={top:0,left:0,width:this.canvas.width,height:this.canvas.height}}_listen(){document.addEventListener(\"mousemove\",t=>{this.cursor={x:t.clientX-this._bounds.left,y:t.clientY-this._bounds.top}}),this.cursor={x:this.canvas.width/2,y:this.canvas.height/2}}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawBackground(){this.ctx.fillStyle=\"#DEE1E6\",this.ctx.fillRect(0,0,this.canvas.width,50),this.ctx.fillStyle=\"#EEE\",this.ctx.fillRect(0,50,this.canvas.width,90),this.ctx.stroke()}drawLoader(){this.ctx.fillStyle=\"#222\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}_getBounds(){this._bounds=this.canvas.getBoundingClientRect()}},this._canvas=this._cc.canvas,this._ctx=this._cc.ctx,this.spawnPoints=[],console.log({x:h.ran(h.bounds.width),y:h.ran(h.bounds.height)}),h.entities.push(new D({pos:{x:h.ran(h.bounds.width),y:h.ran(h.bounds.height),angle:0}})),h.player=new M,h.entities.push(h.player),this._remaining=h.entities,this._starttime=Date.now(),this._framerate=10}_drawReticule(){this._ctx.beginPath(),this._ctx.moveTo(this._cc.cursor.x-7.5,this._cc.cursor.y),this._ctx.lineTo(this._cc.cursor.x+7.5,this._cc.cursor.y),this._ctx.stroke(),this._ctx.beginPath(),this._ctx.moveTo(this._cc.cursor.x,this._cc.cursor.y-7.5),this._ctx.lineTo(this._cc.cursor.x,this._cc.cursor.y+7.5),this._ctx.stroke(),this._ctx.strokeRect(h.bounds.left,h.bounds.top,h.bounds.width,h.bounds.height)}_die(){}_update(){}_loop(){if(Date.now()-this._starttime>this._framerate){this._starttime=Date.now(),this._cc.clear(),this._cc.drawBackground(),h.player._target=this._cc.cursor,this._remaining=[];for(let t=0;t<h.entities.length;t++){let s=h.entities[t];s.isDead||(s.update(this._ctx),this._remaining.push(s))}h.entities=this._remaining,this._drawReticule(),h.tick++}requestAnimationFrame(t=>this._loop())}startLoop(){this._loop()}}).startLoop();e(6)}]);","extractedComments":[]}